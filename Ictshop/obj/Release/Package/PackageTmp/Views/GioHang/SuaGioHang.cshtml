@using Ictshop.Models;
@model List<GioHang>

@{
    ViewBag.Title = "GioHang";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@*<center><h2 class="text-info"> GIỎ HÀNG</h2></center>

<table class="table-bordered font-italic divGioHang">
    <tr>
        <th> Mã SP</th>

        <th> Tên SP</th>

        <th> Ảnh bìa</th>

        <th> Đơn giá</th>

        <th> Số lượng</th>

        <th> Thành tiền</th>
    </tr>



    @foreach (var item in Model)
    {
        <tr>
            <td> @item.iMasp</td>

            <td> @item.sTensp</td>

            <td> <img src="@Url.Content("~/HinhanhSP/" +item.sAnhBia)" width="50" height="50" /></td>

            <td>  @String.Format("{0:0,0}", item.dDonGia) VNĐ</td>

          
            @using (Html.BeginForm("CapNhatGioHang", "GioHang", new { @iMaSP = item.iMasp }))
            {
                <td>@Html.TextBox("txtSoLuong", item.iSoLuong) </td>

                <td>@String.Format("{0:0,0}", item.ThanhTien) VNĐ</td>
                <td>
                    <input type="submit" value="Cập nhật" class="btn-secondary" />
                    <br />
                 
                    <button class="btn-success">@Html.ActionLink("Xóa", "XoaGioHang", new { @iMaSP = item.iMasp })</button>
                </td>
            }

        </tr>
    }
</table>*@

@section jsFooter{

    <script src="~/assets/js/cartController.js"></script>
}
<div class="content">
    <div class="section group">
        @if (Model.Count > 0)
        {
            <table class="tblcart">
                <thead>
                    <tr>
                        <td>Mã SP</td>
                        <td>Tên SP</td>
                        <td>Ảnh SP</td>
                        <td>Đơn giá</td>
                        <td>Số lượng</td>
                        <td>Thành tiền</td>
                        <td></td>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.iMasp</td>
                            <td>@item.sTensp</td>
                            <td><img src="@Url.Content("~/HinhanhSP/" +item.sAnhBia)" width="100" /></td>
                            <td>@String.Format("{0:0,0}", item.dDonGia) VNĐ</td>
                            @using (Html.BeginForm("CapNhatGioHang", "GioHang", new { @iMaSP = item.iMasp }))
                            {
                                <td>@Html.TextBox("txtSoLuong", item.iSoLuong, new {@class= "txtQuantity" }) </td>
                                <td>@String.Format("{0:0,0}", item.ThanhTien) VNĐ</td>
                                <td>
                                    <input type="submit" value="Cập nhật" class="btn-secondary" />
                                    <br />
                                    @*Xóa giỏ hàng gọi về Action XoaGioHang*@
                                    <button class="btn">@Html.ActionLink("Xóa", "XoaGioHang", new { @iMaSP = item.iMasp })</button>
                                </td>
                            }
                        </tr>
                    }

                </tbody>
            </table>
        }
        else
        {
            <span class="alert alert-danger">Chưa có sản phẩm nào trong giỏ hàng</span>
        }

    </div>
</div>